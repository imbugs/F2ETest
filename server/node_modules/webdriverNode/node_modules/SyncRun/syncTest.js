// 队列1
var SyncMethod = require( './SyncRun').newQueue();

// 这是一个同步方法，需要在定义的时候执行next，但是在调用的时候不必制定next
var syncTest = SyncMethod( 'syncTest', function ( next ){
    next();
    sleep( 0, function (){
        console.log( 'sync2' );

    });
});

var syncTest2 = SyncMethod( 'syncTest2', function ( next ){

    next();
});

// sleep 典型的异步
var sleep = SyncMethod( 'sleep', function ( s, fn ){

    setTimeout( fn, s );
});

syncTest(function (){

    console.log( 'a' );
    syncTest(function (){

        console.log( 'a-');
    });

    sleep( 500, function (){

        console.log( 'b' );

//        syncTest(function (){
//
//            console.log( 'c' );
//
//            sleep( 500, function (){
//
//                console.log( 'd' );
//            });
//        });

        sleep( 600, function (){

            console.log( 'e' );
        });

    });

    sleep( 700, function (){

        console.log( 'f' );
    });
});

syncTest(function (){

    console.log( 'g' );
});

sleep( 800, function (){

    console.log( 'h' );
});